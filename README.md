# Бот приёма заказов

Telegram- и VK-боты для приёма и обработки заказов. Все данные хранятся в SQLite, ведётся логирование в файлы (`bot.log`, `vk_bot.log`) и в консоль.

## Возможности

- Регистрация пользователей при первом обращении.
- Обязательная подписка на Telegram-канал (ID `-1003460665929`): пока пользователь не подписался, каждое сообщение получает ответ с кнопками «Проверить» и «Подписаться».
- Оформление заказов с городом, адресами и комментариями, отправка формы оплаты по кнопке «Карта».
- Профиль с любимыми адресами и привязкой собственных ботов; для каждого подключённого бота создаётся отдельная база данных.
- Админ-панель для статистики, рассылок и управления статусами заказов.

## Структура

- `main.py` — Telegram-бот на `python-telegram-bot` со всеми сценариями и обязательной проверкой подписки.
- `vk_bot.py` — ВК-бот на `vk_api`, повторяющий оформление заказов через сообщения группы.
- `requirements.txt` — зависимости проекта.
- `LICENSE` — лицензия Apache 2.0.

## Настройка

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Создайте файл `cfg.py` или используйте переменные окружения для ключевых настроек:
   - `TOKEN` — токен Telegram-бота (основной бот для уведомлений администраторов).
   - `PRIMARY_BOT_TOKEN` — токен основного бота, через который приходят админские уведомления.
   - `ADMIN_IDS` — список ID администраторов Telegram.
   - `SCREENSHOTS_DIR`, `DB_DIR` — каталоги для медиа и БД.
   - `VK_TOKEN` — токен сообщества ВК.
   - `VK_GROUP_ID` — ID группы ВК, в которой работает бот.

## Запуск

- Telegram-бот:
  ```bash
  python main.py
  ```
- ВК-бот:
  ```bash
  python vk_bot.py
  ```

## Логирование

Оба бота используют файловые и консольные обработчики логов. Все ключевые действия (получение сообщений, запуск, создание заказов) выводятся в терминал, что упрощает отладку и мониторинг.
